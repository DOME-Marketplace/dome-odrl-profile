{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "RuleSchema",
  "definitions": {
    "RuleRef": {
      "title": "RuleRef",
      "description": "",
      "type": "object",
      "properties": {},
      "allOf": [
        {
          "$ref": "../tmforum/Common.schema.json#/definitions/EntityRef"
        }
      ]
    },
    "Rule": {
      "title": "Rule",
      "description": "The Rule class is the parent of the Permission, Prohibition, and Duty classes. The Rule class represents the common characteristics of these three classes. A Rule class MUST be disjoint with all other Rule subclasses.",
      "type": "object",
      "properties": {
        "action": {
          "$ref": "./Action.schema.json#/definitions/ActionRef"
        },
        "target": {
          "$ref": "./Asset.schema.json#/definitions/AssetRef"
        },
        "assigner": {
          "$ref": "./Party.schema.json#/definitions/PartyRef"
        },
        "assignee": {
          "$ref": "./Party.schema.json#/definitions/PartyRef"
        },
        "constraint": {
          "type": "array",
          "items": {
            "$ref": "./Constraint.schema.json#/definitions/ConstraintOrLogicalConstraint"
          }
        }
      },
      "allOf": [
        {
          "$ref": "#/definitions/RuleRef"
        }
      ]
    },
    "PermissionRef": {
      "title": "PermissionRef",
      "description": "",
      "type": "object",
      "properties": {},
      "allOf": [
        {
          "$ref": "#/definitions/RuleRef"
        }
      ]
    },
    "Permission": {
      "title": "Permission",
      "description": "A Permission allows an action, with all refinements satisfied, to be exercised on an Asset if all constraints are satisfied and if all duties are fulfilled.",
      "type": "object",
      "properties": {
        "duty": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/Duty"
          }
        }
      },
      "allOf": [
        {
          "$ref": "#/definitions/Rule"
        },
        {
          "$ref": "#/definitions/PermissionRef"
        }
      ]
    },
    "ProhibitionRef": {
      "title": "ProhibitionRef",
      "description": "",
      "type": "object",
      "properties": {},
      "allOf": [
        {
          "$ref": "#/definitions/RuleRef"
        }
      ]
    },
    "Prohibition": {
      "title": "Prohibition",
      "description": "A Prohibition disallows an action, with all refinements satisfied, to be exercised on an Asset if all constraints are satisfied. If the Prohibition has been infringed by the action being exercised, then all of the remedies MUST be fulfilled to set the state of the Prohibition to not infringed.",
      "type": "object",
      "properties": {
        "remedy": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/Duty"
          }
        }
      },
      "allOf": [
        {
          "$ref": "#/definitions/Rule"
        },
        {
          "$ref": "#/definitions/ProhibitionRef"
        }
      ]
    },
    "DutyRef": {
      "title": "DutyRef",
      "description": "",
      "type": "object",
      "properties": {},
      "allOf": [
        {
          "$ref": "#/definitions/RuleRef"
        }
      ]
    },
    "Duty": {
      "title": "Duty",
      "description": "A Duty is the obligation to exercise an action, with all refinements satisfied. A Duty is fulfilled if all constraints are satisfied and if its action, with all refinements satisfied, has been exercised. If its action has not been exercised, then all consequences must also be fulfilled to fulfil the Duty. That is, consequences are additional Duties that must also be fulfilled. (Note: only Duties referenced by duty or obligation properties may use consequence properties.)",
      "type": "object",
      "properties": {
        "consequence": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/Duty"
          }
        }
      },
      "allOf": [
        {
          "$ref": "#/definitions/Rule"
        },
        {
          "$ref": "#/definitions/DutyRef"
        }
      ]
    }
  }
}